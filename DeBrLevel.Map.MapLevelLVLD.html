<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="https://github.com/JordanIschard/DeBrLevel">Project</a>
      <a href="https://jordanischard.github.io/">Author</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">Arith.PeanoNat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Logic.Classical_Prop.html#"><span class="id" title="library">Classical_Prop</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#"><span class="id" title="library">Classes.RelationClasses</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MMaps</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">MMaps</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">DeBrLevel</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeBrLevel.Core.Level.html#"><span class="id" title="library">Level</span></a> <a class="idref" href="DeBrLevel.Core.LevelInterface.html#"><span class="id" title="library">LevelInterface</span></a> <a class="idref" href="DeBrLevel.Map.Mapkit.MapExtInterface.html#"><span class="id" title="library">MapExtInterface</span></a> <a class="idref" href="DeBrLevel.Map.Mapkit.MapExt.html#"><span class="id" title="library">MapExt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelInterface.html#"><span class="id" title="library">MapLevelInterface</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelKD.html#"><span class="id" title="library">MapLevelKD</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab138"></a><h1 class="section">Implementation - Map - <span class="inlinecode"><span class="id" title="var">LevelK</span>/<span class="id" title="var">LvlD</span></span></h1>

<div class="paragraph"> </div>

<a id="lab139"></a><h2 class="section">Leveled Map Implementation</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="IsLvlMapLVLD" class="idref" href="#IsLvlMapLVLD"><span class="id" title="module">IsLvlMapLVLD</span></a> (<span class="id" title="var">Data</span> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#IsLvlETWL"><span class="id" title="module">IsLvlETWL</span></a>) (<span class="id" title="var">M</span> : <span class="id" title="module">Interface.S</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level"><span class="id" title="module">Level</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">MO</span> : <a class="idref" href="DeBrLevel.Map.Mapkit.MapExtInterface.html#MapLVLInterface"><span class="id" title="module">MapLVLInterface</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M"><span class="id" title="module">M</span></a>) &lt;: <a class="idref" href="DeBrLevel.Map.MapLevelInterface.html#IsLvlMapLVLDInterface"><span class="id" title="module">IsLvlMapLVLDInterface</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M"><span class="id" title="module">M</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO"><span class="id" title="module">MO</span></a>.<br/>

<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="DeBrLevel.Map.MapLevelKD.html#IsLvlMapKD"><span class="id" title="module">IsLvlMapKD</span></a> <a class="idref" href="DeBrLevel.Core.Level.html#Level"><span class="id" title="module">Level</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M"><span class="id" title="module">M</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO"><span class="id" title="module">MO</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO"><span class="id" title="module">MO</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P"><span class="id" title="module">OP.P</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_new_notin" class="idref" href="#IsLvlMapLVLD.shift_new_notin"><span class="id" title="lemma">shift_new_notin</span></a> (<a id="lb:1" class="idref" href="#lb:1"><span class="id" title="binder">lb</span></a> <a id="k:2" class="idref" href="#k:2"><span class="id" title="binder">k</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="t:3" class="idref" href="#t:3"><span class="id" title="binder">t</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:1"><span class="id" title="variable">lb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">(</span></a><a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:3"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.In"><span class="id" title="definition">M.In</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:1"><span class="id" title="variable">lb</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:1"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#k:2"><span class="id" title="variable">k</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:3"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.map_induction"><span class="id" title="lemma">map_induction</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hgeq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.Empty_eq"><span class="id" title="axiom">Empty_eq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.not_in_empty"><span class="id" title="lemma">not_in_empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.Add"><span class="id" title="definition">Add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_add"><span class="id" title="lemma">shift_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key_add_max"><span class="id" title="axiom">new_key_add_max</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.add_in_iff"><span class="id" title="lemma">add_in_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">HIn</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.shift"><span class="id" title="definition">Level.shift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.leb_spec0"><span class="id" title="lemma">Lvl.leb_spec0</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hle</span> | <span class="id" title="var">Hnle</span>]; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_max_refl" class="idref" href="#IsLvlMapLVLD.shift_max_refl"><span class="id" title="lemma">shift_max_refl</span></a> (<a id="lb:4" class="idref" href="#lb:4"><span class="id" title="binder">lb</span></a> <a id="k:5" class="idref" href="#k:5"><span class="id" title="binder">k</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="t:6" class="idref" href="#t:6"><span class="id" title="binder">t</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:4"><span class="id" title="variable">lb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">(</span></a><a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:6"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:4"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#k:5"><span class="id" title="variable">k</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:6"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:6"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.map_induction"><span class="id" title="lemma">map_induction</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hleb</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.Add"><span class="id" title="definition">Add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key_add_max"><span class="id" title="axiom">new_key_add_max</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_add"><span class="id" title="lemma">shift_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hle1</span>: <span class="id" title="var">lb</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <span class="id" title="var">t1</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hle1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_max"><span class="id" title="axiom">max_key_add_max</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hle1</span>; <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_wf_refl"><span class="id" title="lemma">Level.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.Wf"><span class="id" title="definition">Level.Wf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HIn</span> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.In"><span class="id" title="definition">M.In</span></a> <span class="id" title="var">x</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.add"><span class="id" title="axiom">M.add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">t1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.add_in_iff"><span class="id" title="lemma">add_in_iff</span></a>; <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key_in"><span class="id" title="axiom">new_key_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_new_refl" class="idref" href="#IsLvlMapLVLD.shift_new_refl"><span class="id" title="lemma">shift_new_refl</span></a> (<a id="lb:7" class="idref" href="#lb:7"><span class="id" title="binder">lb</span></a> <a id="k:8" class="idref" href="#k:8"><span class="id" title="binder">k</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="t:9" class="idref" href="#t:9"><span class="id" title="binder">t</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:7"><span class="id" title="variable">lb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">(</span></a><a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:9"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:7"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#k:8"><span class="id" title="variable">k</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:9"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:9"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hge</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key_unfold"><span class="id" title="axiom">new_key_unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.is_empty"><span class="id" title="axiom">M.is_empty</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">HEmp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HEmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.is_empty_2"><span class="id" title="lemma">is_empty_2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.is_empty"><span class="id" title="axiom">M.is_empty</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">k</span> <span class="id" title="var">t</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">HEmp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HEmp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HEmp</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.is_empty_2"><span class="id" title="lemma">is_empty_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HEmp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty_iff"><span class="id" title="lemma">shift_Empty_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HEmp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_max_refl"><span class="id" title="lemma">shift_max_refl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_max_key_gt_iff" class="idref" href="#IsLvlMapLVLD.shift_max_key_gt_iff"><span class="id" title="lemma">shift_max_key_gt_iff</span></a> (<a id="m:10" class="idref" href="#m:10"><span class="id" title="binder">m</span></a> <a id="n:11" class="idref" href="#n:11"><span class="id" title="binder">n</span></a> <a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="o:13" class="idref" href="#o:13"><span class="id" title="binder">o</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#o:13"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:10"><span class="id" title="variable">m</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#n:11"><span class="id" title="variable">n</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#o:13"><span class="id" title="variable">o</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="DeBrLevel.Core.Level.html#Level.shift"><span class="id" title="definition">Level.shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:10"><span class="id" title="variable">m</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#n:11"><span class="id" title="variable">n</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:12"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">o</span> <span class="id" title="keyword">using</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.map_induction"><span class="id" title="lemma">map_induction</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hmax</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_Empty"><span class="id" title="axiom">max_key_Empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_Empty"><span class="id" title="axiom">max_key_Empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hmax</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.Add"><span class="id" title="definition">Add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_add"><span class="id" title="lemma">shift_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_max"><span class="id" title="axiom">max_key_add_max</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.leb_spec0"><span class="id" title="lemma">Lvl.leb_spec0</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> <span class="id" title="var">o1</span>) <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hle</span> | <span class="id" title="var">Hgt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_l"><span class="id" title="axiom">max_key_add_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_gt_iff"><span class="id" title="lemma">Level.shift_gt_iff</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_r"><span class="id" title="axiom">max_key_add_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHo1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_add"><span class="id" title="lemma">shift_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_max"><span class="id" title="axiom">max_key_add_max</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.leb_spec0"><span class="id" title="lemma">Lvl.leb_spec0</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">o1</span>)) (<a class="idref" href="DeBrLevel.Core.Level.html#Level.shift"><span class="id" title="definition">Level.shift</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hle'</span> | <span class="id" title="var">Hgt'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_l"><span class="id" title="axiom">max_key_add_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_gt_iff"><span class="id" title="lemma">Level.shift_gt_iff</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_r"><span class="id" title="axiom">max_key_add_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHo1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmax</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_max_key_le" class="idref" href="#IsLvlMapLVLD.shift_max_key_le"><span class="id" title="lemma">shift_max_key_le</span></a> (<a id="m:14" class="idref" href="#m:14"><span class="id" title="binder">m</span></a> <a id="n:15" class="idref" href="#n:15"><span class="id" title="binder">n</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="o:16" class="idref" href="#o:16"><span class="id" title="binder">o</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#o:16"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:14"><span class="id" title="variable">m</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#n:15"><span class="id" title="variable">n</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#o:16"><span class="id" title="variable">o</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">o</span> <span class="id" title="keyword">using</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.map_induction"><span class="id" title="lemma">map_induction</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.Add"><span class="id" title="definition">Add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_add"><span class="id" title="lemma">shift_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key_add_max"><span class="id" title="axiom">max_key_add_max</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">(</span></a><a class="idref" href="DeBrLevel.Core.Level.html#Level.shift"><span class="id" title="definition">Level.shift</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_le"><span class="id" title="lemma">Level.shift_le</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_new_key_le" class="idref" href="#IsLvlMapLVLD.shift_new_key_le"><span class="id" title="lemma">shift_new_key_le</span></a> (<a id="m:17" class="idref" href="#m:17"><span class="id" title="binder">m</span></a> <a id="n:18" class="idref" href="#n:18"><span class="id" title="binder">n</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="o:19" class="idref" href="#o:19"><span class="id" title="binder">o</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#o:19"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:17"><span class="id" title="variable">m</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#n:18"><span class="id" title="variable">n</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#o:19"><span class="id" title="variable">o</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key_unfold"><span class="id" title="axiom">new_key_unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.is_empty"><span class="id" title="axiom">M.is_empty</span></a> <span class="id" title="var">o</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hemp</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.is_empty"><span class="id" title="axiom">M.is_empty</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">o</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hemp'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.is_empty_2"><span class="id" title="lemma">is_empty_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hemp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty_iff"><span class="id" title="lemma">shift_Empty_iff</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hemp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.is_empty_1"><span class="id" title="lemma">is_empty_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hemp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hemp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hemp'</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hemp'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> <span class="id" title="var">o</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.max_key"><span class="id" title="axiom">max_key</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">o</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_max_key_le"><span class="id" title="lemma">shift_max_key_le</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.Wf_in_iff" class="idref" href="#IsLvlMapLVLD.Wf_in_iff"><span class="id" title="lemma">Wf_in_iff</span></a> (<a id="m:20" class="idref" href="#m:20"><span class="id" title="binder">m</span></a> <a id="n:21" class="idref" href="#n:21"><span class="id" title="binder">n</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="x:22" class="idref" href="#x:22"><span class="id" title="binder">x</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.key"><span class="id" title="definition">M.key</span></a>) (<a id="t:23" class="idref" href="#t:23"><span class="id" title="binder">t</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.Wf"><span class="id" title="definition">Wf</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:20"><span class="id" title="variable">m</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:23"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.In"><span class="id" title="definition">M.In</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:22"><span class="id" title="variable">x</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:20"><span class="id" title="variable">m</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#n:21"><span class="id" title="variable">n</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:23"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.In"><span class="id" title="definition">M.In</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:22"><span class="id" title="variable">x</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:23"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.map_induction"><span class="id" title="lemma">map_induction</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hvo</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.Add"><span class="id" title="definition">Add</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.Wf_add_notin"><span class="id" title="lemma">Wf_add_notin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvo</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvk</span> [<span class="id" title="var">Hve</span> <span class="id" title="var">Hv</span>]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_add_notin"><span class="id" title="lemma">shift_add_notin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.add_in_iff"><span class="id" title="lemma">add_in_iff</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">HIn</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">left</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_wf_refl"><span class="id" title="lemma">Level.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHt1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.Add"><span class="id" title="definition">Add</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.Wf_add_notin"><span class="id" title="lemma">Wf_add_notin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvo</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvk</span> [<span class="id" title="var">Hve</span> <span class="id" title="var">Hv</span>]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_add_notin"><span class="id" title="lemma">shift_add_notin</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.add_in_iff"><span class="id" title="lemma">add_in_iff</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">HIn</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">left</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_wf_refl"><span class="id" title="lemma">Level.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_find_Wf" class="idref" href="#IsLvlMapLVLD.shift_find_Wf"><span class="id" title="lemma">shift_find_Wf</span></a> (<a id="lb:24" class="idref" href="#lb:24"><span class="id" title="binder">lb</span></a> <a id="k:25" class="idref" href="#k:25"><span class="id" title="binder">k</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="x:26" class="idref" href="#x:26"><span class="id" title="binder">x</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.key"><span class="id" title="definition">M.key</span></a>) (<a id="m:27" class="idref" href="#m:27"><span class="id" title="binder">m</span></a> <a id="m':28" class="idref" href="#m':28"><span class="id" title="binder">m'</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Core.Level.html#Level.Wf"><span class="id" title="definition">Level.Wf</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:24"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:26"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.In"><span class="id" title="definition">M.In</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:26"><span class="id" title="variable">x</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:27"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.find"><span class="id" title="axiom">M.find</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:26"><span class="id" title="variable">x</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:27"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.find"><span class="id" title="axiom">M.find</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:26"><span class="id" title="variable">x</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m':28"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.find"><span class="id" title="axiom">M.find</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:26"><span class="id" title="variable">x</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:24"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#k:25"><span class="id" title="variable">k</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m:27"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.find"><span class="id" title="axiom">M.find</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:26"><span class="id" title="variable">x</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:24"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#k:25"><span class="id" title="variable">k</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#m':28"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hvk</span> <span class="id" title="var">HIn</span> <span class="id" title="var">Hfi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">HfV</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.find_1"><span class="id" title="lemma">find_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HfV</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_wf_refl"><span class="id" title="lemma">Level.shift_wf_refl</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">k</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_find_iff"><span class="id" title="lemma">shift_find_iff</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">k</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HfV</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HfV1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HfV1</span>; <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_find_iff"><span class="id" title="lemma">shift_find_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hfi</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsLvlMapLVLD.shift_in_new_key" class="idref" href="#IsLvlMapLVLD.shift_in_new_key"><span class="id" title="lemma">shift_in_new_key</span></a> (<a id="n:29" class="idref" href="#n:29"><span class="id" title="binder">n</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="x:30" class="idref" href="#x:30"><span class="id" title="binder">x</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.key"><span class="id" title="definition">M.key</span></a>) (<a id="t:31" class="idref" href="#t:31"><span class="id" title="binder">t</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.In"><span class="id" title="definition">M.In</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:30"><span class="id" title="variable">x</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:31"><span class="id" title="variable">t</span></a>) <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#n:29"><span class="id" title="variable">n</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:31"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M.In"><span class="id" title="definition">M.In</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#x:30"><span class="id" title="variable">x</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:31"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_in_e"><span class="id" title="lemma">shift_in_e</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">Heq</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_in_iff"><span class="id" title="lemma">shift_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key_in"><span class="id" title="axiom">new_key_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_wf_refl"><span class="id" title="lemma">Level.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key_in"><span class="id" title="axiom">new_key_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_wf_refl"><span class="id" title="lemma">Level.shift_wf_refl</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.new_key"><span class="id" title="axiom">new_key</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">n</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD.shift_in_iff"><span class="id" title="lemma">shift_in_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD"><span class="id" title="module">IsLvlMapLVLD</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab140"></a><h2 class="section">Bindless Leveled Map Implementation</h2>

</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="IsBdlLvlMapLVLD" class="idref" href="#IsBdlLvlMapLVLD"><span class="id" title="module">IsBdlLvlMapLVLD</span></a> <br/>
&nbsp;&nbsp;(<span class="id" title="var">Data</span> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#IsBdlLvlETWL"><span class="id" title="module">IsBdlLvlETWL</span></a>) (<span class="id" title="var">M</span> : <span class="id" title="module">Interface.S</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level"><span class="id" title="module">Level</span></a>) <br/>
&nbsp;&nbsp;(<span class="id" title="var">MO</span> : <a class="idref" href="DeBrLevel.Map.Mapkit.MapExtInterface.html#MapLVLInterface"><span class="id" title="module">MapLVLInterface</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M"><span class="id" title="module">M</span></a>) &lt;: <a class="idref" href="DeBrLevel.Map.MapLevelInterface.html#IsBdlLvlMapLVLDInterface"><span class="id" title="module">IsBdlLvlMapLVLDInterface</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M"><span class="id" title="module">M</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO"><span class="id" title="module">MO</span></a>.<br/>

<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD"><span class="id" title="module">IsLvlMapLVLD</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#M"><span class="id" title="module">M</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO"><span class="id" title="module">MO</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO"><span class="id" title="module">MO</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P"><span class="id" title="module">OP.P</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="IsBdlLvlMapLVLD.shift_wf_refl" class="idref" href="#IsBdlLvlMapLVLD.shift_wf_refl"><span class="id" title="lemma">shift_wf_refl</span></a> (<a id="lb:32" class="idref" href="#lb:32"><span class="id" title="binder">lb</span></a> <a id="k:33" class="idref" href="#k:33"><span class="id" title="binder">k</span></a> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#Lvl.t"><span class="id" title="definition">Lvl.t</span></a>) (<a id="t:34" class="idref" href="#t:34"><span class="id" title="binder">t</span></a> : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.t"><span class="id" title="definition">t</span></a>) : <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsBdlLvlMapLVLD.Wf"><span class="id" title="definition">Wf</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:32"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:34"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.eq"><span class="id" title="definition">eq</span></a> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsBdlLvlMapLVLD.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#lb:32"><span class="id" title="variable">lb</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#k:33"><span class="id" title="variable">k</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:34"><span class="id" title="variable">t</span></a>) <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#t:34"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.map_induction"><span class="id" title="lemma">map_induction</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hvt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsBdlLvlMapLVLD.shift_Empty"><span class="id" title="lemma">shift_Empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MO.OP.P.Add"><span class="id" title="definition">Add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsBdlLvlMapLVLD.Wf_add_notin"><span class="id" title="lemma">Wf_add_notin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvx</span> [<span class="id" title="var">Hve</span> <span class="id" title="var">Hvt</span>]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsBdlLvlMapLVLD.shift_add"><span class="id" title="lemma">shift_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level.shift_wf_refl"><span class="id" title="lemma">Level.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data.shift"><span class="id" title="axiom">Data.shift</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">k</span> <span class="id" title="var">e</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data.eq_leibniz"><span class="id" title="axiom">Data.eq_leibniz</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data.shift_wf_refl"><span class="id" title="axiom">Data.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsBdlLvlMapLVLD"><span class="id" title="module">IsBdlLvlMapLVLD</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab141"></a><h3 class="section">Map Make</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="MakeLvlMapLVLD" class="idref" href="#MakeLvlMapLVLD"><span class="id" title="module">MakeLvlMapLVLD</span></a> (<span class="id" title="var">Data</span> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#IsLvlETWL"><span class="id" title="module">IsLvlETWL</span></a>) &lt;: <a class="idref" href="DeBrLevel.Core.LevelInterface.html#IsLvlET"><span class="id" title="module">IsLvlET</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="MakeLvlMapLVLD.Raw" class="idref" href="#MakeLvlMapLVLD.Raw"><span class="id" title="module">Raw</span></a> := <span class="id" title="module">MMaps.OrdList.Make</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level"><span class="id" title="module">Level</span></a>.<br/>
<span class="id" title="keyword">Module</span> <a id="MakeLvlMapLVLD.Ext" class="idref" href="#MakeLvlMapLVLD.Ext"><span class="id" title="module">Ext</span></a> := <a class="idref" href="DeBrLevel.Map.Mapkit.MapExt.html#MapETLVL"><span class="id" title="module">MapETLVL</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeLvlMapLVLD.Raw"><span class="id" title="module">Raw</span></a>.<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsLvlMapLVLD"><span class="id" title="module">IsLvlMapLVLD</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeLvlMapLVLD.Raw"><span class="id" title="module">Raw</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeLvlMapLVLD.Ext"><span class="id" title="module">Ext</span></a>.<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeLvlMapLVLD.OP.P"><span class="id" title="module">OP.P</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeLvlMapLVLD"><span class="id" title="module">MakeLvlMapLVLD</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="MakeBdlLvlMapLVLD" class="idref" href="#MakeBdlLvlMapLVLD"><span class="id" title="module">MakeBdlLvlMapLVLD</span></a> (<span class="id" title="var">Data</span> : <a class="idref" href="DeBrLevel.Core.LevelInterface.html#IsBdlLvlETWL"><span class="id" title="module">IsBdlLvlETWL</span></a>) &lt;: <a class="idref" href="DeBrLevel.Core.LevelInterface.html#IsBdlLvlET"><span class="id" title="module">IsBdlLvlET</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="MakeBdlLvlMapLVLD.Raw" class="idref" href="#MakeBdlLvlMapLVLD.Raw"><span class="id" title="module">Raw</span></a> := <span class="id" title="module">MMaps.OrdList.Make</span> <a class="idref" href="DeBrLevel.Core.Level.html#Level"><span class="id" title="module">Level</span></a>.<br/>
<span class="id" title="keyword">Module</span> <a id="MakeBdlLvlMapLVLD.Ext" class="idref" href="#MakeBdlLvlMapLVLD.Ext"><span class="id" title="module">Ext</span></a> := <a class="idref" href="DeBrLevel.Map.Mapkit.MapExt.html#MapETLVL"><span class="id" title="module">MapETLVL</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeBdlLvlMapLVLD.Raw"><span class="id" title="module">Raw</span></a>.<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#IsBdlLvlMapLVLD"><span class="id" title="module">IsBdlLvlMapLVLD</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#Data"><span class="id" title="module">Data</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeBdlLvlMapLVLD.Raw"><span class="id" title="module">Raw</span></a> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeBdlLvlMapLVLD.Ext"><span class="id" title="module">Ext</span></a>.<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeBdlLvlMapLVLD.OP.P"><span class="id" title="module">OP.P</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeBrLevel.Map.MapLevelLVLD.html#MakeBdlLvlMapLVLD"><span class="id" title="module">MakeBdlLvlMapLVLD</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
